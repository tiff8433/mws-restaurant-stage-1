parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"k5Pw":[function(require,module,exports) {
"use strict";!function(){function e(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function t(t,n,o){var r,i=new Promise(function(i,u){e(r=t[n].apply(t,o)).then(i,u)});return i.request=r,i}function n(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,n,o,r){r.forEach(function(r){r in o.prototype&&(e.prototype[r]=function(){return t(this[n],r,arguments)})})}function r(e,t,n,o){o.forEach(function(o){o in n.prototype&&(e.prototype[o]=function(){return this[t][o].apply(this[t],arguments)})})}function i(e,n,o,r){r.forEach(function(r){r in o.prototype&&(e.prototype[r]=function(){return e=this[n],(o=t(e,r,arguments)).then(function(e){if(e)return new c(e,o.request)});var e,o})})}function u(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function s(e){this._store=e}function p(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function a(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new p(n)}function f(e){this._db=e}n(u,"_index",["name","keyPath","multiEntry","unique"]),o(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),i(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),n(c,"_cursor",["direction","key","primaryKey","value"]),o(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(c.prototype[t]=function(){var n=this,o=arguments;return Promise.resolve().then(function(){return n._cursor[t].apply(n._cursor,o),e(n._request).then(function(e){if(e)return new c(e,n._request)})})})}),s.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},s.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},n(s,"_store",["name","keyPath","indexNames","autoIncrement"]),o(s,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),i(s,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),r(s,"_store",IDBObjectStore,["deleteIndex"]),p.prototype.objectStore=function(){return new s(this._tx.objectStore.apply(this._tx,arguments))},n(p,"_tx",["objectStoreNames","mode"]),r(p,"_tx",IDBTransaction,["abort"]),a.prototype.createObjectStore=function(){return new s(this._db.createObjectStore.apply(this._db,arguments))},n(a,"_db",["name","version","objectStoreNames"]),r(a,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new p(this._db.transaction.apply(this._db,arguments))},n(f,"_db",["name","version","objectStoreNames"]),r(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[s,u].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),o=n[n.length-1],r=this._store||this._index,i=r[e].apply(r,n.slice(0,-1));i.onsuccess=function(){o(i.result)}})})}),[u,s].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,o=[];return new Promise(function(r){n.iterateCursor(e,function(e){e?(o.push(e.value),void 0===t||o.length!=t?e.continue():r(o)):r(o)})})})});var d={open:function(e,n,o){var r=t(indexedDB,"open",[e,n]),i=r.request;return i&&(i.onupgradeneeded=function(e){o&&o(new a(i.result,e.oldVersion,i.transaction))}),r.then(function(e){return new f(e)})},delete:function(e){return t(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=d,module.exports.default=module.exports):self.idb=d}();
},{}],"lRug":[function(require,module,exports) {
"use strict";var t=require("idb"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}var n=e.default.open("db",1,function(t){switch(t.oldVersion){case 1:t.createObjectStore("restaurant").createIndex("name","cuisine","neighborhood")}}),a={get:function(t){return n.then(function(e){e.transaction("restaurant").objectStore("restaurant").get(t)})},set:function(t,e){return n.then(function(r){var n=r.transaction("restaurant","readwrite");return n.objectStore("restaurant").put(e,t),n.complete})},delete:function(t){return n.then(function(e){var r=e.transaction("restaurant","readwrite");return r.objectStore("restaurant").delete(t),r.complete})},clear:function(){return n.then(function(t){var e=t.transaction("restaurant","readwrite");return e.objectStore("restaurant").clear(),e.complete})},keys:function(){return n.then(function(t){var e=t.transaction("restaurant"),r=[],n=e.objectStore("restaurant");return(n.iterateKeyCursor||n.iterateCursor).call(n,function(t){t&&(r.push(t.key),t.continue())}),e.complete.then(function(){return r})})}};
},{"idb":"k5Pw"}],"P8yk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var u=n[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(n,t,u){return t&&e(n.prototype,t),u&&e(n,u),n}}();function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=function(){function t(){n(this,t)}return e(t,null,[{key:"fetchRestaurants",value:function(e){var n=new XMLHttpRequest;n.open("GET",t.DATABASE_URL),n.onload=function(){if(200===n.status){var t=JSON.parse(n.responseText);e(null,t)}else{var u="Request failed. Returned status of "+n.status;e(u,null)}},n.send()}},{key:"fetchRestaurantById",value:function(e,n){t.fetchRestaurants(function(t,u){if(t)n(t,null);else{var r=u.find(function(n){return n.id==e});r?n(null,r):n("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(e,n){t.fetchRestaurants(function(t,u){if(t)n(t,null);else{var r=u.filter(function(n){return n.cuisine_type==e});n(null,r)}})}},{key:"fetchRestaurantByNeighborhood",value:function(e,n){t.fetchRestaurants(function(t,u){if(t)n(t,null);else{var r=u.filter(function(n){return n.neighborhood==e});n(null,r)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(e,n,u){t.fetchRestaurants(function(t,r){if(t)u(t,null);else{var a=r;"all"!=e&&(a=a.filter(function(n){return n.cuisine_type==e})),"all"!=n&&(a=a.filter(function(e){return e.neighborhood==n})),u(null,a)}})}},{key:"fetchNeighborhoods",value:function(e){t.fetchRestaurants(function(n,t){if(n)e(n,null);else{var u=t.map(function(e,n){return t[n].neighborhood}),r=u.filter(function(e,n){return u.indexOf(e)==n});e(null,r)}})}},{key:"fetchCuisines",value:function(e){t.fetchRestaurants(function(n,t){if(n)e(n,null);else{var u=t.map(function(e,n){return t[n].cuisine_type}),r=u.filter(function(e,n){return u.indexOf(e)==n});e(null,r)}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e,n){return"../assets/images/"+e.id+"-"+n+".jpg"}},{key:"mapMarkerForRestaurant",value:function(e,n){var u=new L.marker([e.latlng.lat,e.latlng.lng],{title:e.name,alt:e.name,url:t.urlForRestaurant(e)});return u.addTo(n),u}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337/restaurants"}}]),t}();exports.default=t;
},{}],"d6sW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./idb"),t=r(e),n=require("./dbhelper.js"),o=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var a,s=void 0,i=void 0,c=void 0,u=[],l=function(){console.log("DBHELP",o.default),o.default.fetchNeighborhoods(function(e,t){e?console.error(e):(self.neighborhoods=t,d())})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,t=document.getElementById("neighborhoods-select");t.setAttribute("aria-label","neighborhood select"),e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},m=function(){o.default.fetchCuisines(function(e,t){e?console.error(e):(self.cuisines=t,f())})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.cuisines,t=document.getElementById("cuisines-select");t.setAttribute("aria-label","cuisines select"),e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},p=function(){a=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoidGlmZmFueWgxMDEiLCJhIjoiY2ppcTltYWdjMDB4dTNsbzF2MTBrd3U5NyJ9.p99H31XzJEgUSu1jJYRZDg",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(a),h()},h=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,r=t.selectedIndex,a=e[n].value,s=t[r].value;o.default.fetchRestaurantByCuisineAndNeighborhood(a,s,function(e,t){e?console.error(e):(g(t),v())})},g=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(e){return e.remove()}),self.markers=[],self.restaurants=e},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(b(e))}),E()},b=function(e){var t=document.createElement("div");t.classList.add("restaurant-element");var n=document.createElement("a");t.append(n);var r=document.createElement("picture"),a=document.createElement("img");a.className="restaurant-img",a.src=o.default.imageUrlForRestaurant(e,"large"),a.alt=e.name,r.appendChild(a),n.append(r);var s=document.createElement("h2");s.innerHTML=e.name,n.append(s);var i=document.createElement("p");i.innerHTML=e.neighborhood,n.append(i);var c=document.createElement("p");return c.innerHTML=e.address,n.append(c),n.href=o.default.urlForRestaurant(e),t},E=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=o.default.mapMarkerForRestaurant(e,a);t.on("click",function(){window.location.href=t.options.url}),self.markers.push(t)})},M={initMap:p,fetchNeighborhoods:l,fetchCuisines:m};exports.default=M;
},{"./idb":"lRug","./dbhelper.js":"P8yk"}],"Y4ZV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=void 0,n=function(){r(function(t,n){t?console.error(t):(self.newMap=L.map("map",{center:[n.latlng.lat,n.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoidGlmZmFueWgxMDEiLCJhIjoiY2ppcTltYWdjMDB4dTNsbzF2MTBrd3U5NyJ9.p99H31XzJEgUSu1jJYRZDg",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(e),d(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap))})},r=function(e){if(self.restaurant)e(null,self.restaurant);else{var t=p("id");t?DBHelper.fetchRestaurantById(t,function(t,n){self.restaurant=n,n?(a(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img"),n=document.createElement("img");n.className="restaurant-img",pathPrefix=DBHelper.imageUrlForRestaurant(e),n.src=pathPrefix+"-large.jpg";var r=document.createElement("source");r.media="(max-width: 450px)",r.srcset=pathPrefix+"-320x240.jpg";var a=document.createElement("source");a.media="(min-width: 750px)",a.srcset=pathPrefix+"-large.jpg, "+pathPrefix+"-1600_large_2x.jpg 2x",n.alt=r.alt=a.alt=e.name,t.appendChild(r),t.appendChild(a),t.appendChild(n),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),i()},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var o=document.createElement("td");o.innerHTML=e[n],r.appendChild(o),t.appendChild(r)}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(l(e))}),t.appendChild(a)},l=function(e){var t=document.createElement("li"),n=document.createElement("p");n.innerHTML=e.name,t.appendChild(n);var r=document.createElement("p");r.innerHTML=e.date,t.appendChild(r);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,t.appendChild(a);var o=document.createElement("p");return o.innerHTML=e.comments,t.appendChild(o),t},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},p=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};exports.default={initRestaurantMap:n};
},{}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./js/main"),t=u(e),n=require("./js/restaurant_info");function u(e){return e&&e.__esModule?e:{default:e}}document.addEventListener("DOMContentLoaded",function(e){t.default.initMap(),t.default.fetchNeighborhoods(),t.default.fetchCuisines()});
},{"./js/main":"d6sW","./js/restaurant_info":"Y4ZV"}]},{},["Focm"], null)
//# sourceMappingURL=/mws-restaurant-stage-1.0c6850d1.map